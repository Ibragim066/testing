(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&!e;)e=r[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();class e{constructor(t){if(!(t instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=t,this.cards=[{type:"American Express",number:"371449635398431"},{type:"Diners Club",number:"30569309025904"},{type:"Discover",number:"6011111111111117"},{type:"Мир",number:"2200123456789001"},{type:"MasterCard",number:"5555555555554444"},{type:"Visa",number:"4111111111111111"}]}bindToDOM(){this.container.innerHTML=this.markup}get markup(){return`\n      <div class='table-examples'>\n        <h3>Example credit card numbers</h3>\n        <table class="table table-bordered">\n          <thead>\n            <tr>\n              <th>Credit Card Type</th>\n              <th>Credit Card Number</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${this.cards.map((t=>`\n              <tr>\n                <td>${t.type}</td>\n                <td>${t.number}</td>\n              </tr>\n            `)).join("")}\n          </tbody>\n        </table>\n      </div>\n    `}}class n{constructor(t){if(!(t instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=t,this.onSubmit=this.onSubmit.bind(this),this.onInputChange=this.onInputChange.bind(this)}bindToDOM(){this.container.innerHTML=n.markup;const{selector:t,messageSelector:e,submitSelector:r,inputSelector:i}=n;this.element=this.container.querySelector(t),this.message=this.element.querySelector(e),this.submit=this.element.querySelector(r),this.input=this.element.querySelector(i),this.element.addEventListener("submit",this.onSubmit),this.input.addEventListener("input",this.onInputChange)}onSubmit(t){t.preventDefault();const e=function(t){const e=`${t}`;let n=0,r=!1;for(let t=e.length-1;t>=0;t-=1){let i=parseInt(e.charAt(t),10);r&&(i*=2)>9&&(i-=9),n+=i,r=!r}return n%10==0}(this.input.value);if(this.input.classList.toggle("valid",e),this.input.classList.toggle("invalid",!e),e){const t=function(t){let e="no-found";const n=String(t);return/^4[0-9]{12}(?:[0-9]{3})?$/.test(n)&&(e="visa"),/^(5[1-5]|222[1-9]|22[3-9]|2[3-6]|27[01]|2720)[0-9]{0,}$/.test(n)&&(e="master"),/^220(0|4)[0-9]{12}$/.test(n)&&(e="mir"),/^65[4-9][0-9]{13}|64[4-9][0-9]{13}|6011[0-9]{12}|(622(?:12[6-9]|1[3-9][0-9]|[2-8][0-9][0-9]|9[01][0-9]|92[0-5])[0-9]{10})$/.test(n)&&(e="discover"),/^3[47][0-9]{13}$/.test(n)&&(e="amex"),/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/.test(n)&&(e="diners_club"),e}(this.input.value),e=document.querySelector(`.${t}`);e?e.classList.add("card-active"):this.showMessage()}}onInputChange(){this.input.classList.remove("invalid","valid");const t=document.querySelector(".card-active");t&&t.classList.remove("card-active"),this.hideMessage()}showMessage(){this.message.classList.remove("hidden")}hideMessage(){this.message.classList.add("hidden")}static get markup(){return'\n      <form id="form" class="form">\n          <div class="form-group">\n              <input class="form-control" id="card_number" name="card_number" type="text" placeholder="Credit card number" data-original-title="" title="">\n          </div>\n          <div class=\'button-wrapper\'>\n            <button class="submit">Click to Validate</button>\n          </div> \n          <span class="message hidden">Упсс! Платежной системы нет в базе</span>\n      </form>\n    '}static get selector(){return".form"}static get messageSelector(){return".message"}static get submitSelector(){return".submit"}static get inputSelector(){return".form-control"}}const r=t.p+"img/visa_electron_curved.png",i=t.p+"img/mastercard_curved.png",s=t.p+"img/credit_card_amex.png",a=t.p+"img/discover_straight_32px.png",c=t.p+"img/mir_card.png",o=t.p+"img/diners_club_card.png";class l{constructor(t){if(!(t instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=t,this.cards=[{class:"visa",title:"Visa",url:r},{class:"master",title:"Mastercard",url:i},{class:"amex",title:"American Express",url:s},{class:"discover",title:"Discover",url:a},{class:"mir",title:"Mir",url:c},{class:"diners_club",title:"Diners Club",url:o}]}bindToDOM(){this.container.innerHTML=this.markup}get markup(){return`\n      <div class="cards">\n        ${this.cards.map((t=>`\n        <div>\n          <img class="card ${t.class}" src=${t.url} alt="${t.title}">\n        </div>  \n        `)).join("")}\n      </div>\n    `}}class d{constructor(t){if(!(t instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=t}bindToDOM(){this.container.innerHTML=d.markup,this.element=this.container.querySelector(d.selector),this.formContainer=this.element.querySelector(d.formSelector),this.cardsContainer=this.element.querySelector(d.cardsSelector);new n(this.formContainer).bindToDOM();new l(this.cardsContainer).bindToDOM()}static get formSelector(){return".form-container"}static get cardsSelector(){return".cards-container"}static get selector(){return".widget"}static get markup(){return"\n      <div class='widget'>\n        <h3>Check your credit card number</h3>\n        <div class='form-container'></div>\n        <div class='cards-container'></div>\n      </div>\n    "}}class u{constructor(t){if(!(t instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=t}bindToDOM(){this.container.innerHTML=u.markUp,this.widgetContainer=this.container.querySelector(u.widgetSelector),this.tableContainer=this.container.querySelector(u.tableSelector);new d(this.widgetContainer).bindToDOM();new e(this.tableContainer).bindToDOM()}static get markUp(){return'\n      <div class="headmast">\n        <h2>Validate Credit Card Numbers</h2>\n        <h3>Check a credit card number with our online checker!</h3>\n        <div class="widget-container"></div>\n        <div class="table-container"></div>\n      </div>\n    '}static get widgetSelector(){return".widget-container"}static get tableSelector(){return".table-container"}}const m=document.querySelector("#card-validator-container");new u(m).bindToDOM()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y0FBY3VDLEVBQU9JLGVBRTNDLElBQUlwRCxFQUFVOUIsS0FBSytFLGVBQzNCdkQsWUFFUyxJQUFJNEMsRUFBVXBFLEtBQUtpRixnQkFDM0J6RCxXQUNSLENBRUEsdUJBQVd3RCxHQUNULE1BQU8saUJBQ1QsQ0FFQSx3QkFBV0UsR0FDVCxNQUFPLGtCQUNULENBRUEsbUJBQVdoRCxHQUNULE1BQU8sU0FDVCxDQUVBLGlCQUFXUixHQUNULE1BQVEsMkxBT1YsRUMzQ2EsTUFBTXlELEVBQ25CakUsV0FBQUEsQ0FBWUMsR0FDVixLQUFNQSxhQUFxQkMsYUFDekIsTUFBTSxJQUFJTixNQUFNLGdDQUdsQmQsS0FBS21CLFVBQVlBLENBQ25CLENBRUFLLFNBQUFBLEdBQ0V4QixLQUFLbUIsVUFBVU0sVUFBWTBELEVBQVVDLE9BQ3JDcEYsS0FBS3FGLGdCQUFrQnJGLEtBQUttQixVQUFVb0IsY0FDcEM0QyxFQUFVRyxnQkFFWnRGLEtBQUt1RixlQUFpQnZGLEtBQUttQixVQUFVb0IsY0FBYzRDLEVBQVVLLGVBRTlDLElBQUlWLEVBQU85RSxLQUFLcUYsaUJBQ3hCN0QsWUFFTyxJQUFJaUUsRUFBbUJ6RixLQUFLdUYsZ0JBQ3BDL0QsV0FDUixDQUVBLGlCQUFXNEQsR0FDVCxNQUFRLG9RQVFWLENBRUEseUJBQVdFLEdBQ1QsTUFBTyxtQkFDVCxDQUVBLHdCQUFXRSxHQUNULE1BQU8sa0JBQ1QsRUMxQ0YsTUFBTXJFLEVBQVlaLFNBQVNnQyxjQUFjLDZCQUN2QixJQUFJNEMsRUFBVWhFLEdBQ3RCSyxXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vanNfdGVzdGluZy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9qc190ZXN0aW5nL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vanNfdGVzdGluZy93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9qc190ZXN0aW5nLy4vc3JjL2pzL2NvbXBvbmVudHMvY2FyZHMtZXhhbXBsZXMtdGFibGUvQ2FyZHNFeGFtcGxlc1RhYmxlLmpzIiwid2VicGFjazovL2pzX3Rlc3RpbmcvLi9zcmMvanMvY29tcG9uZW50cy9jaGVjay1mb3JtL0NoZWNrRm9ybS5qcyIsIndlYnBhY2s6Ly9qc190ZXN0aW5nLy4vc3JjL2pzL3ZhbGlkYXRpb24vaXNWYWxpZC5qcyIsIndlYnBhY2s6Ly9qc190ZXN0aW5nLy4vc3JjL2pzL3ZhbGlkYXRpb24vZmluZFBheW1lbnRTeXN0ZW0uanMiLCJ3ZWJwYWNrOi8vanNfdGVzdGluZy8uL3NyYy9qcy9jb21wb25lbnRzL2NhcmQtbGlzdC9DYXJkTGlzdC5qcyIsIndlYnBhY2s6Ly9qc190ZXN0aW5nLy4vc3JjL2pzL2NvbXBvbmVudHMvd2lkZ2V0L1dpZGdldC5qcyIsIndlYnBhY2s6Ly9qc190ZXN0aW5nLy4vc3JjL2pzL2NvbXBvbmVudHMvdmFsaWRhdG9yL1ZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9qc190ZXN0aW5nLy4vc3JjL2pzL2FwcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJ2YXIgc2NyaXB0VXJsO1xuaWYgKF9fd2VicGFja19yZXF1aXJlX18uZy5pbXBvcnRTY3JpcHRzKSBzY3JpcHRVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcubG9jYXRpb24gKyBcIlwiO1xudmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmRvY3VtZW50O1xuaWYgKCFzY3JpcHRVcmwgJiYgZG9jdW1lbnQpIHtcblx0aWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmM7XG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkge1xuXHRcdFx0dmFyIGkgPSBzY3JpcHRzLmxlbmd0aCAtIDE7XG5cdFx0XHR3aGlsZSAoaSA+IC0xICYmICFzY3JpcHRVcmwpIHNjcmlwdFVybCA9IHNjcmlwdHNbaS0tXS5zcmM7XG5cdFx0fVxuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCJpbXBvcnQgJy4vY2FyZHMtZXhhbXBsZXMtdGFibGUuY3NzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZEV4YW1wbGVzVGFibGUge1xuICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcbiAgICBpZiAoIShjb250YWluZXIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY29udGFpbmVyIGlzIG5vdCBIVE1MRWxlbWVudCcpO1xuICAgIH1cblxuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIHRoaXMuY2FyZHMgPSBbXG4gICAgICB7IHR5cGU6ICdBbWVyaWNhbiBFeHByZXNzJywgbnVtYmVyOiAnMzcxNDQ5NjM1Mzk4NDMxJyB9LFxuICAgICAgeyB0eXBlOiAnRGluZXJzIENsdWInLCBudW1iZXI6ICczMDU2OTMwOTAyNTkwNCcgfSxcbiAgICAgIHsgdHlwZTogJ0Rpc2NvdmVyJywgbnVtYmVyOiAnNjAxMTExMTExMTExMTExNycgfSxcbiAgICAgIHsgdHlwZTogJ9Cc0LjRgCcsIG51bWJlcjogJzIyMDAxMjM0NTY3ODkwMDEnIH0sXG4gICAgICB7IHR5cGU6ICdNYXN0ZXJDYXJkJywgbnVtYmVyOiAnNTU1NTU1NTU1NTU1NDQ0NCcgfSxcbiAgICAgIHsgdHlwZTogJ1Zpc2EnLCBudW1iZXI6ICc0MTExMTExMTExMTExMTExJyB9LFxuICAgIF07XG4gIH1cblxuICBiaW5kVG9ET00oKSB7XG4gICAgdGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gdGhpcy5tYXJrdXA7XG4gIH1cblxuICBnZXQgbWFya3VwKCkge1xuICAgIHJldHVybiBgXG4gICAgICA8ZGl2IGNsYXNzPSd0YWJsZS1leGFtcGxlcyc+XG4gICAgICAgIDxoMz5FeGFtcGxlIGNyZWRpdCBjYXJkIG51bWJlcnM8L2gzPlxuICAgICAgICA8dGFibGUgY2xhc3M9XCJ0YWJsZSB0YWJsZS1ib3JkZXJlZFwiPlxuICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgPHRoPkNyZWRpdCBDYXJkIFR5cGU8L3RoPlxuICAgICAgICAgICAgICA8dGg+Q3JlZGl0IENhcmQgTnVtYmVyPC90aD5cbiAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAke3RoaXMuY2FyZHNcbiAgICAubWFwKFxuICAgICAgKGNhcmQpID0+IGBcbiAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgIDx0ZD4ke2NhcmQudHlwZX08L3RkPlxuICAgICAgICAgICAgICAgIDx0ZD4ke2NhcmQubnVtYmVyfTwvdGQ+XG4gICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICBgLFxuICAgIClcbiAgICAuam9pbignJyl9XG4gICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgPC90YWJsZT5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cbn1cbiIsImltcG9ydCBmaW5kUGF5bWVudFN5c3RlbSBmcm9tICcuLi8uLi92YWxpZGF0aW9uL2ZpbmRQYXltZW50U3lzdGVtJztcbmltcG9ydCBpc1ZhbGlkIGZyb20gJy4uLy4uL3ZhbGlkYXRpb24vaXNWYWxpZCc7XG5pbXBvcnQgJy4vY2hlY2stZm9ybS5jc3MnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDaGVja0Zvcm0ge1xuICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcbiAgICBpZiAoIShjb250YWluZXIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY29udGFpbmVyIGlzIG5vdCBIVE1MRWxlbWVudCcpO1xuICAgIH1cblxuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuXG4gICAgdGhpcy5vblN1Ym1pdCA9IHRoaXMub25TdWJtaXQuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uSW5wdXRDaGFuZ2UgPSB0aGlzLm9uSW5wdXRDaGFuZ2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGJpbmRUb0RPTSgpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSBDaGVja0Zvcm0ubWFya3VwO1xuXG4gICAgY29uc3Qge1xuICAgICAgc2VsZWN0b3IsIG1lc3NhZ2VTZWxlY3Rvciwgc3VibWl0U2VsZWN0b3IsIGlucHV0U2VsZWN0b3IsXG4gICAgfSA9IENoZWNrRm9ybTtcblxuICAgIHRoaXMuZWxlbWVudCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgIHRoaXMubWVzc2FnZSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKG1lc3NhZ2VTZWxlY3Rvcik7XG4gICAgdGhpcy5zdWJtaXQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihzdWJtaXRTZWxlY3Rvcik7XG4gICAgdGhpcy5pbnB1dCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKGlucHV0U2VsZWN0b3IpO1xuXG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMub25TdWJtaXQpO1xuICAgIHRoaXMuaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB0aGlzLm9uSW5wdXRDaGFuZ2UpO1xuICB9XG5cbiAgb25TdWJtaXQoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGNvbnN0IGlzVmFsaWRDYXJkID0gaXNWYWxpZCh0aGlzLmlucHV0LnZhbHVlKTtcbiAgICB0aGlzLmlucHV0LmNsYXNzTGlzdC50b2dnbGUoJ3ZhbGlkJywgaXNWYWxpZENhcmQpO1xuICAgIHRoaXMuaW5wdXQuY2xhc3NMaXN0LnRvZ2dsZSgnaW52YWxpZCcsICFpc1ZhbGlkQ2FyZCk7XG5cbiAgICBpZiAoaXNWYWxpZENhcmQpIHtcbiAgICAgIGNvbnN0IHBheW1lbnRTeXN0ZW0gPSBmaW5kUGF5bWVudFN5c3RlbSh0aGlzLmlucHV0LnZhbHVlKTtcbiAgICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtwYXltZW50U3lzdGVtfWApO1xuXG4gICAgICBpZiAoY2FyZCkge1xuICAgICAgICBjYXJkLmNsYXNzTGlzdC5hZGQoJ2NhcmQtYWN0aXZlJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNob3dNZXNzYWdlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgb25JbnB1dENoYW5nZSgpIHtcbiAgICB0aGlzLmlucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ2ludmFsaWQnLCAndmFsaWQnKTtcbiAgICBjb25zdCBhY3RpdmVDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtYWN0aXZlJyk7XG4gICAgaWYgKGFjdGl2ZUNhcmQpIHtcbiAgICAgIGFjdGl2ZUNhcmQuY2xhc3NMaXN0LnJlbW92ZSgnY2FyZC1hY3RpdmUnKTtcbiAgICB9XG4gICAgdGhpcy5oaWRlTWVzc2FnZSgpO1xuICB9XG5cbiAgc2hvd01lc3NhZ2UoKSB7XG4gICAgdGhpcy5tZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICB9XG5cbiAgaGlkZU1lc3NhZ2UoKSB7XG4gICAgdGhpcy5tZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICB9XG5cbiAgc3RhdGljIGdldCBtYXJrdXAoKSB7XG4gICAgcmV0dXJuIGBcbiAgICAgIDxmb3JtIGlkPVwiZm9ybVwiIGNsYXNzPVwiZm9ybVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwiY2FyZF9udW1iZXJcIiBuYW1lPVwiY2FyZF9udW1iZXJcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiQ3JlZGl0IGNhcmQgbnVtYmVyXCIgZGF0YS1vcmlnaW5hbC10aXRsZT1cIlwiIHRpdGxlPVwiXCI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz0nYnV0dG9uLXdyYXBwZXInPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInN1Ym1pdFwiPkNsaWNrIHRvIFZhbGlkYXRlPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+IFxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWVzc2FnZSBoaWRkZW5cIj7Qo9C/0YHRgSEg0J/Qu9Cw0YLQtdC20L3QvtC5INGB0LjRgdGC0LXQvNGLINC90LXRgiDQsiDQsdCw0LfQtTwvc3Bhbj5cbiAgICAgIDwvZm9ybT5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzZWxlY3RvcigpIHtcbiAgICByZXR1cm4gJy5mb3JtJztcbiAgfVxuXG4gIHN0YXRpYyBnZXQgbWVzc2FnZVNlbGVjdG9yKCkge1xuICAgIHJldHVybiAnLm1lc3NhZ2UnO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdWJtaXRTZWxlY3RvcigpIHtcbiAgICByZXR1cm4gJy5zdWJtaXQnO1xuICB9XG5cbiAgc3RhdGljIGdldCBpbnB1dFNlbGVjdG9yKCkge1xuICAgIHJldHVybiAnLmZvcm0tY29udHJvbCc7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVmFsaWQodmFsdWUpIHtcbiAgY29uc3QgbnVtID0gYCR7dmFsdWV9YDtcbiAgbGV0IG5DaGVjayA9IDA7XG4gIGxldCBiRXZlbiA9IGZhbHNlO1xuICBmb3IgKGxldCBuID0gbnVtLmxlbmd0aCAtIDE7IG4gPj0gMDsgbiAtPSAxKSB7XG4gICAgbGV0IG5EaWdpdCA9IHBhcnNlSW50KG51bS5jaGFyQXQobiksIDEwKTtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSAqL1xuICAgICAgICBpZiAoYkV2ZW4gJiYgKG5EaWdpdCAqPSAyKSA+IDkpIHtcbiAgICAgICAgICAgIG5EaWdpdCAtPSA5O1xuICAgICAgICB9XG4gICAgICAgIG5DaGVjayArPSBuRGlnaXQ7XG4gICAgICAgIGJFdmVuID0gIWJFdmVuO1xuICAgIH1cblxuICAgIHJldHVybiBuQ2hlY2sgJSAxMCA9PT0gMDtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBmaW5kUGF5bWVudFN5c3RlbSh2YWx1ZSkge1xuICBsZXQgcGF5U3lzdGVtID0gJ25vLWZvdW5kJztcbiAgY29uc3QgYSA9IFN0cmluZyh2YWx1ZSk7XG4gIGlmICgvXjRbMC05XXsxMn0oPzpbMC05XXszfSk/JC8udGVzdChhKSkge1xuICAgIHBheVN5c3RlbSA9ICd2aXNhJztcbiAgfVxuXG4gIGlmICgvXig1WzEtNV18MjIyWzEtOV18MjJbMy05XXwyWzMtNl18MjdbMDFdfDI3MjApWzAtOV17MCx9JC8udGVzdChhKSkge1xuICAgIHBheVN5c3RlbSA9ICdtYXN0ZXInO1xuICB9XG5cbiAgaWYgKC9eMjIwKDB8NClbMC05XXsxMn0kLy50ZXN0KGEpKSB7XG4gICAgcGF5U3lzdGVtID0gJ21pcic7XG4gIH1cblxuICBpZiAoXG4gICAgL142NVs0LTldWzAtOV17MTN9fDY0WzQtOV1bMC05XXsxM318NjAxMVswLTldezEyfXwoNjIyKD86MTJbNi05XXwxWzMtOV1bMC05XXxbMi04XVswLTldWzAtOV18OVswMV1bMC05XXw5MlswLTVdKVswLTldezEwfSkkLy50ZXN0KFxuICAgICAgYSxcbiAgICApXG4gICkge1xuICAgIHBheVN5c3RlbSA9ICdkaXNjb3Zlcic7XG4gIH1cblxuICBpZiAoL14zWzQ3XVswLTldezEzfSQvLnRlc3QoYSkpIHtcbiAgICBwYXlTeXN0ZW0gPSAnYW1leCc7XG4gIH1cblxuICBpZiAoL14zKD86MFswLTVdfFs2OF1bMC05XSlbMC05XXsxMX0kLy50ZXN0KGEpKSB7XG4gICAgcGF5U3lzdGVtID0gJ2RpbmVyc19jbHViJztcbiAgfVxuXG4gIHJldHVybiBwYXlTeXN0ZW07XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBsaW5lYnJlYWstc3R5bGUgKi9cbmltcG9ydCB2aXNhRWxlY3Ryb24gZnJvbSAnLi4vLi4vLi4vaW1nL3Zpc2FfZWxlY3Ryb25fY3VydmVkLnBuZyc7XG5pbXBvcnQgTWFzdGVyQ2FyZCBmcm9tICcuLi8uLi8uLi9pbWcvbWFzdGVyY2FyZF9jdXJ2ZWQucG5nJztcbmltcG9ydCBBbWV4Q2FyZCBmcm9tICcuLi8uLi8uLi9pbWcvY3JlZGl0X2NhcmRfYW1leC5wbmcnO1xuaW1wb3J0IERpc2NvdmVyQ2FyZCBmcm9tICcuLi8uLi8uLi9pbWcvZGlzY292ZXJfc3RyYWlnaHRfMzJweC5wbmcnO1xuaW1wb3J0IE1pckNhcmQgZnJvbSAnLi4vLi4vLi4vaW1nL21pcl9jYXJkLnBuZyc7XG5pbXBvcnQgRGluZXJzQ2x1YkNhcmQgZnJvbSAnLi4vLi4vLi4vaW1nL2RpbmVyc19jbHViX2NhcmQucG5nJztcblxuaW1wb3J0ICcuL2NhcmQtbGlzdC5jc3MnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkc0xpc3Qge1xuICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcbiAgICBpZiAoIShjb250YWluZXIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY29udGFpbmVyIGlzIG5vdCBIVE1MRWxlbWVudCcpO1xuICAgIH1cblxuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIHRoaXMuY2FyZHMgPSBbXG4gICAgICB7IGNsYXNzOiAndmlzYScsIHRpdGxlOiAnVmlzYScsIHVybDogdmlzYUVsZWN0cm9uIH0sXG4gICAgICB7IGNsYXNzOiAnbWFzdGVyJywgdGl0bGU6ICdNYXN0ZXJjYXJkJywgdXJsOiBNYXN0ZXJDYXJkIH0sXG4gICAgICB7IGNsYXNzOiAnYW1leCcsIHRpdGxlOiAnQW1lcmljYW4gRXhwcmVzcycsIHVybDogQW1leENhcmQgfSxcbiAgICAgIHsgY2xhc3M6ICdkaXNjb3ZlcicsIHRpdGxlOiAnRGlzY292ZXInLCB1cmw6IERpc2NvdmVyQ2FyZCB9LFxuICAgICAgeyBjbGFzczogJ21pcicsIHRpdGxlOiAnTWlyJywgdXJsOiBNaXJDYXJkIH0sXG4gICAgICB7IGNsYXNzOiAnZGluZXJzX2NsdWInLCB0aXRsZTogJ0RpbmVycyBDbHViJywgdXJsOiBEaW5lcnNDbHViQ2FyZCB9LFxuICAgIF07XG4gIH1cblxuICBiaW5kVG9ET00oKSB7XG4gICAgdGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gdGhpcy5tYXJrdXA7XG4gIH1cblxuICBnZXQgbWFya3VwKCkge1xuICAgIHJldHVybiBgXG4gICAgICA8ZGl2IGNsYXNzPVwiY2FyZHNcIj5cbiAgICAgICAgJHt0aGlzLmNhcmRzXG4gICAgLm1hcChcbiAgICAgIChjYXJkKSA9PiBgXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGltZyBjbGFzcz1cImNhcmQgJHtjYXJkLmNsYXNzfVwiIHNyYz0ke2NhcmQudXJsfSBhbHQ9XCIke2NhcmQudGl0bGV9XCI+XG4gICAgICAgIDwvZGl2PiAgXG4gICAgICAgIGAsXG4gICAgKVxuICAgIC5qb2luKCcnKX1cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cbn1cbiIsImltcG9ydCBDaGVja0Zvcm0gZnJvbSAnLi4vY2hlY2stZm9ybS9DaGVja0Zvcm0nO1xuaW1wb3J0IENhcmRzTGlzdCBmcm9tICcuLi9jYXJkLWxpc3QvQ2FyZExpc3QnO1xuaW1wb3J0ICcuL3dpZGdldC5jc3MnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXaWRnZXQge1xuICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcbiAgICBpZiAoIShjb250YWluZXIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY29udGFpbmVyIGlzIG5vdCBIVE1MRWxlbWVudCcpO1xuICAgIH1cblxuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICB9XG5cbiAgYmluZFRvRE9NKCkge1xuICAgIHRoaXMuY29udGFpbmVyLmlubmVySFRNTCA9IFdpZGdldC5tYXJrdXA7XG5cbiAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFdpZGdldC5zZWxlY3Rvcik7XG4gICAgdGhpcy5mb3JtQ29udGFpbmVyID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoV2lkZ2V0LmZvcm1TZWxlY3Rvcik7XG4gICAgdGhpcy5jYXJkc0NvbnRhaW5lciA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFdpZGdldC5jYXJkc1NlbGVjdG9yKTtcblxuICAgIGNvbnN0IGZvcm0gPSBuZXcgQ2hlY2tGb3JtKHRoaXMuZm9ybUNvbnRhaW5lcik7XG4gICAgZm9ybS5iaW5kVG9ET00oKTtcblxuICAgIGNvbnN0IGNhcmRzID0gbmV3IENhcmRzTGlzdCh0aGlzLmNhcmRzQ29udGFpbmVyKTtcbiAgICBjYXJkcy5iaW5kVG9ET00oKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZm9ybVNlbGVjdG9yKCkge1xuICAgIHJldHVybiAnLmZvcm0tY29udGFpbmVyJztcbiAgfVxuXG4gIHN0YXRpYyBnZXQgY2FyZHNTZWxlY3RvcigpIHtcbiAgICByZXR1cm4gJy5jYXJkcy1jb250YWluZXInO1xuICB9XG5cbiAgc3RhdGljIGdldCBzZWxlY3RvcigpIHtcbiAgICByZXR1cm4gJy53aWRnZXQnO1xuICB9XG5cbiAgc3RhdGljIGdldCBtYXJrdXAoKSB7XG4gICAgcmV0dXJuIGBcbiAgICAgIDxkaXYgY2xhc3M9J3dpZGdldCc+XG4gICAgICAgIDxoMz5DaGVjayB5b3VyIGNyZWRpdCBjYXJkIG51bWJlcjwvaDM+XG4gICAgICAgIDxkaXYgY2xhc3M9J2Zvcm0tY29udGFpbmVyJz48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz0nY2FyZHMtY29udGFpbmVyJz48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cbn1cbiIsImltcG9ydCBDYXJkc0V4YW1wbGVzVGFibGUgZnJvbSAnLi4vY2FyZHMtZXhhbXBsZXMtdGFibGUvQ2FyZHNFeGFtcGxlc1RhYmxlJztcbmltcG9ydCBXaWRnZXQgZnJvbSAnLi4vd2lkZ2V0L1dpZGdldCc7XG5pbXBvcnQgJy4vdmFsaWRhdG9yLmNzcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xuICAgIGlmICghKGNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb250YWluZXIgaXMgbm90IEhUTUxFbGVtZW50Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gIH1cblxuICBiaW5kVG9ET00oKSB7XG4gICAgdGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gVmFsaWRhdG9yLm1hcmtVcDtcbiAgICB0aGlzLndpZGdldENvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBWYWxpZGF0b3Iud2lkZ2V0U2VsZWN0b3IsXG4gICAgKTtcbiAgICB0aGlzLnRhYmxlQ29udGFpbmVyID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcihWYWxpZGF0b3IudGFibGVTZWxlY3Rvcik7XG5cbiAgICBjb25zdCB3aWRnZXQgPSBuZXcgV2lkZ2V0KHRoaXMud2lkZ2V0Q29udGFpbmVyKTtcbiAgICB3aWRnZXQuYmluZFRvRE9NKCk7XG5cbiAgICBjb25zdCB0YWJsZSA9IG5ldyBDYXJkc0V4YW1wbGVzVGFibGUodGhpcy50YWJsZUNvbnRhaW5lcik7XG4gICAgdGFibGUuYmluZFRvRE9NKCk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IG1hcmtVcCgpIHtcbiAgICByZXR1cm4gYFxuICAgICAgPGRpdiBjbGFzcz1cImhlYWRtYXN0XCI+XG4gICAgICAgIDxoMj5WYWxpZGF0ZSBDcmVkaXQgQ2FyZCBOdW1iZXJzPC9oMj5cbiAgICAgICAgPGgzPkNoZWNrIGEgY3JlZGl0IGNhcmQgbnVtYmVyIHdpdGggb3VyIG9ubGluZSBjaGVja2VyITwvaDM+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ3aWRnZXQtY29udGFpbmVyXCI+PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0YWJsZS1jb250YWluZXJcIj48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHdpZGdldFNlbGVjdG9yKCkge1xuICAgIHJldHVybiAnLndpZGdldC1jb250YWluZXInO1xuICB9XG5cbiAgc3RhdGljIGdldCB0YWJsZVNlbGVjdG9yKCkge1xuICAgIHJldHVybiAnLnRhYmxlLWNvbnRhaW5lcic7XG4gIH1cbn1cbiIsImltcG9ydCBWYWxpZGF0b3IgZnJvbSAnLi9jb21wb25lbnRzL3ZhbGlkYXRvci9WYWxpZGF0b3InO1xuXG5jb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FyZC12YWxpZGF0b3ItY29udGFpbmVyJyk7XG5jb25zdCB2YWxpZGF0b3IgPSBuZXcgVmFsaWRhdG9yKGNvbnRhaW5lcik7XG52YWxpZGF0b3IuYmluZFRvRE9NKCk7XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImciLCJnbG9iYWxUaGlzIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsIndpbmRvdyIsInNjcmlwdFVybCIsImltcG9ydFNjcmlwdHMiLCJsb2NhdGlvbiIsImRvY3VtZW50IiwiY3VycmVudFNjcmlwdCIsInNyYyIsInNjcmlwdHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImxlbmd0aCIsImkiLCJFcnJvciIsInJlcGxhY2UiLCJwIiwiQ2FyZEV4YW1wbGVzVGFibGUiLCJjb25zdHJ1Y3RvciIsImNvbnRhaW5lciIsIkhUTUxFbGVtZW50IiwiY2FyZHMiLCJ0eXBlIiwibnVtYmVyIiwiYmluZFRvRE9NIiwiaW5uZXJIVE1MIiwibWFya3VwIiwibWFwIiwiY2FyZCIsImpvaW4iLCJDaGVja0Zvcm0iLCJvblN1Ym1pdCIsImJpbmQiLCJvbklucHV0Q2hhbmdlIiwic2VsZWN0b3IiLCJtZXNzYWdlU2VsZWN0b3IiLCJzdWJtaXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJlbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIm1lc3NhZ2UiLCJzdWJtaXQiLCJpbnB1dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJwcmV2ZW50RGVmYXVsdCIsImlzVmFsaWRDYXJkIiwidmFsdWUiLCJudW0iLCJuQ2hlY2siLCJiRXZlbiIsIm4iLCJuRGlnaXQiLCJwYXJzZUludCIsImNoYXJBdCIsImlzVmFsaWQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJwYXltZW50U3lzdGVtIiwicGF5U3lzdGVtIiwiYSIsIlN0cmluZyIsInRlc3QiLCJmaW5kUGF5bWVudFN5c3RlbSIsImFkZCIsInNob3dNZXNzYWdlIiwicmVtb3ZlIiwiYWN0aXZlQ2FyZCIsImhpZGVNZXNzYWdlIiwiQ2FyZHNMaXN0IiwiY2xhc3MiLCJ0aXRsZSIsInVybCIsInZpc2FFbGVjdHJvbiIsIk1hc3RlckNhcmQiLCJBbWV4Q2FyZCIsIkRpc2NvdmVyQ2FyZCIsIk1pckNhcmQiLCJEaW5lcnNDbHViQ2FyZCIsIldpZGdldCIsImZvcm1Db250YWluZXIiLCJmb3JtU2VsZWN0b3IiLCJjYXJkc0NvbnRhaW5lciIsImNhcmRzU2VsZWN0b3IiLCJWYWxpZGF0b3IiLCJtYXJrVXAiLCJ3aWRnZXRDb250YWluZXIiLCJ3aWRnZXRTZWxlY3RvciIsInRhYmxlQ29udGFpbmVyIiwidGFibGVTZWxlY3RvciIsIkNhcmRzRXhhbXBsZXNUYWJsZSJdLCJzb3VyY2VSb290IjoiIn0=